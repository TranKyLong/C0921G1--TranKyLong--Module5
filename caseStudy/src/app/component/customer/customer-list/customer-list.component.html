<div class="my_content">
  <div class="list_title">
    <h1> CUSTOMER LIST </h1>
  </div>

  <input class="form-control" type="search" placeholder="Search " aria-label="Search" name="name" [(ngModel)]="name"
         (ngModelChange)="search()">


  <p class="msg"></p>
  <a type="button" class="organtedbtn" routerLink="/customer/create"> Add new Customer</a>
  <table class="table table-striped table-hover">
    <thead>
    <tr>
      <th>Name</th>
      <th> Birthday</th>
      <th> Gender</th>
      <th> Id Card</th>
      <th> Contact</th>
      <th> Type</th>
      <th> Action</th>
    </tr>
    </thead>
    <tr *ngFor="let cus of customerList | paginate: { itemsPerPage: 5, currentPage: p }">
      <td>
        <div class="the_name"><i class="fa-solid fa-circle-user myIcon"></i> <span
        > {{cus.customerName}} </span></div>
        <div class="the_code"><i class="fa-solid fa-barcode myIcon"></i> <span
        > {{cus.customerCode}}</span></div>
      </td>

      <td>{{cus.customerBirthday}}</td>
      <td>
        <div *ngIf="cus.customerGender ==1"> Male</div>
        <div *ngIf="cus.customerGender ==0"> Female</div>
      </td>

      <td>{{cus.customerIdCard}}</td>

      <td>
        <div class="yelow_organe"><i class="fa-solid fa-phone "></i> <span
        >{{cus.customerPhone}} </span></div>
        <div class="red_purple"><i class="fa-solid fa-envelope "></i> <span
        > {{cus.customerEmail}}</span></div>
        <div class="green_blue"><i class="fa-solid fa-location-dot "></i> <span
        > {{cus.customerAdress}}</span></div>
      </td>
      <td> {{cus.customerType}}</td>
      <td class="">
        <a type="button" routerLink="/customer/edit/{{cus.id}}" class="btn  btn-primary text-black">
          edit
        </a>
        <button (click)="findById(cus.id)" type="button" class="btn btn-danger" data-bs-toggle="modal"
                data-bs-target="#exampleModal">
          delete
        </button>
        <a type="button" routerLink="/contract/create/{{cus.id}}" class="btn  btn-primary text-black">
          Create Contract
        </a>
      </td>
    </tr>
  </table>
  <pagination-controls (pageChange)="p = $event"></pagination-controls>

</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirm delete</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        confirm delete customer has name <span
        class="text-decoration-underline text-danger">{{customer.customerName}}</span>
        and code <span class="text-decoration-underline text-danger">{{customer.customerCode}}</span> ?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteCustomer(customer.id)">
          Delete
        </button>
      </div>
    </div>
  </div>


</div>
